# TrevanBox AIé¢„å¤„ç†å™¨

> åŸºäºOllamaçš„æ™ºèƒ½å†…å®¹é¢„å¤„ç†ç³»ç»Ÿï¼Œè‡ªåŠ¨ä¸ºå¯¼å…¥å†…å®¹ç”Ÿæˆæ ‡å‡†åŒ–å…ƒæ•°æ®

## æ¦‚è¿°

AIé¢„å¤„ç†å™¨æ˜¯TrevanBoxç³»ç»Ÿçš„æ ¸å¿ƒè‡ªåŠ¨åŒ–ç»„ä»¶ï¼Œä½¿ç”¨æœ¬åœ°Ollamaæ¨¡å‹å¯¹å¯¼å…¥çš„å†…å®¹è¿›è¡Œæ™ºèƒ½åˆ†æï¼Œè‡ªåŠ¨ç”Ÿæˆæ ‡é¢˜ã€æ ‡ç­¾ã€æ‘˜è¦å’Œåˆ†ç±»å»ºè®®ï¼Œç¡®ä¿æ‰€æœ‰å†…å®¹éƒ½ç¬¦åˆPARAç³»ç»Ÿçš„æ ‡å‡†åŒ–æ ¼å¼ã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ¤– æ™ºèƒ½åˆ†æ
- **æ ‡é¢˜ç”Ÿæˆ**ï¼šæ ¹æ®å†…å®¹è‡ªåŠ¨æå–æˆ–ç”Ÿæˆç®€æ´æ ‡é¢˜
- **æ ‡ç­¾æå–**ï¼šæ™ºèƒ½è¯†åˆ«å…³é”®è¯å’Œä¸»é¢˜æ ‡ç­¾
- **æ‘˜è¦ç”Ÿæˆ**ï¼šè‡ªåŠ¨ç”Ÿæˆ200å­—ä»¥å†…çš„å†…å®¹æ‘˜è¦
- **åˆ†ç±»å»ºè®®**ï¼šæ¨èé€‚åˆçš„PARAåˆ†ç±»ï¼ˆProjects/Areas/Resourcesï¼‰
- **å…ƒæ•°æ®æ ‡å‡†åŒ–**ï¼šç¡®ä¿æ‰€æœ‰æ–‡ä»¶éƒ½æœ‰å®Œæ•´çš„YAML frontmatter

### ğŸ“ å¤šç›®å½•æ”¯æŒ
æ”¯æŒæ‰€æœ‰TrevanBoxå¯¼å…¥ç›®å½•ï¼š
- `follow` - RSSè®¢é˜…å†…å®¹
- `clippings` - æµè§ˆå™¨æ’ä»¶æ‘˜å½•
- `readwise` - é˜…è¯»ç¬”è®°ç³»ç»Ÿ
- `zotero` - å­¦æœ¯æ–‡çŒ®
- `webdav` - äº‘å­˜å‚¨åŒæ­¥
- `manual` - æ‰‹åŠ¨å¯¼å…¥
- `ainotes` - AIç”Ÿæˆå†…å®¹

### âš™ï¸ çµæ´»é…ç½®
- **é¢„è§ˆæ¨¡å¼**ï¼š`--dry-run`æŸ¥çœ‹å¤„ç†ç»“æœè€Œä¸ä¿®æ”¹æ–‡ä»¶
- **è‡ªåŠ¨ç§»åŠ¨**ï¼š`--move-to-inbox`å¤„ç†åè‡ªåŠ¨ç§»åŠ¨åˆ°å¾…å¤„ç†ç›®å½•
- **æ‰¹é‡å¤„ç†**ï¼šæ”¯æŒå•ç›®å½•æˆ–å¤šç›®å½•æ‰¹é‡å¤„ç†
- **é”™è¯¯æ¢å¤**ï¼šè‡ªåŠ¨å¤‡ä»½å’Œå¤„ç†å¤±è´¥æ¢å¤

## å®‰è£…è¦æ±‚

### ç³»ç»Ÿä¾èµ–
- **uvå·¥å…·**ï¼šç°ä»£åŒ–PythonåŒ…ç®¡ç†å™¨
- Python 3.7+ï¼ˆç”±uvè‡ªåŠ¨ç®¡ç†ï¼‰
- OllamaæœåŠ¡è¿è¡Œåœ¨ `http://localhost:11434`
- Bash shellç¯å¢ƒ

### å¿«é€Ÿç¯å¢ƒè®¾ç½®
```bash
# 1. å®‰è£…uvï¼ˆå¦‚æœæ²¡æœ‰ï¼‰
curl -LsSf https://astral.sh/uv/install.sh | sh

# 2. åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
uv venv .venv

# 3. å®‰è£…Pythonä¾èµ–
uv pip install requests>=2.31.0 PyYAML>=6.0 chardet>=5.2.0

# 4. éªŒè¯ç¯å¢ƒ
./scripts/preprocessor.sh status
```

### Ollamaæ¨¡å‹
```bash
ollama pull qwen3:8b
```

### ç¯å¢ƒä¼˜åŠ¿
- **10-100å€æ›´å¿«**ï¼šç›¸æ¯”ä¼ ç»Ÿpipæ–¹å¼
- **æ™ºèƒ½ç¼“å­˜**ï¼šé¿å…é‡å¤ä¸‹è½½
- **è·¨å¹³å°å…¼å®¹**ï¼šWindows/Linux/macOSç»Ÿä¸€ä½“éªŒ
- **è‡ªåŠ¨ä¾èµ–ç®¡ç†**ï¼šè„šæœ¬è‡ªåŠ¨æ£€æŸ¥å’Œå®‰è£…ç¼ºå¤±ä¾èµ–

## é…ç½®è¯´æ˜

### config.yamlé…ç½®æ–‡ä»¶

```yaml
ollama:
  base_url: "http://localhost:11434"  # OllamaæœåŠ¡åœ°å€
  model: "qwen3:8b"                  # ä½¿ç”¨çš„æ¨¡å‹
  timeout: 30                        # è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
  retry: 3                          # é‡è¯•æ¬¡æ•°

metadata:
  default_status: "sprout"           # é»˜è®¤å†…å®¹çŠ¶æ€
  default_type: "note"              # é»˜è®¤å†…å®¹ç±»å‹
  standard_fields:                   # æ ‡å‡†å…ƒæ•°æ®å­—æ®µ
    - "created"
    - "updated"
    - "status"
    - "type"
    - "tags"
    - "area"
    - "title"
    - "description"

processing:
  max_file_size: 10485760           # æœ€å¤§æ–‡ä»¶å¤§å°ï¼ˆ10MBï¼‰
  encoding_detection: true          # è‡ªåŠ¨æ£€æµ‹æ–‡ä»¶ç¼–ç 
  backup_enabled: true              # å¯ç”¨å¤‡ä»½åŠŸèƒ½
  move_to_inbox: false             # é»˜è®¤ä¸ç§»åŠ¨åˆ°å¾…å¤„ç†ç›®å½•

ai:
  title_max_length: 15              # æ ‡é¢˜æœ€å¤§é•¿åº¦
  tags_max_count: 7                 # æœ€å¤§æ ‡ç­¾æ•°é‡
  summary_length: 200               # æ‘˜è¦é•¿åº¦é™åˆ¶
```

### ç›®å½•æ˜ å°„é…ç½®
æ¯ä¸ªå¯¼å…¥ç›®å½•éƒ½æœ‰å¯¹åº”çš„é»˜è®¤æ ‡ç­¾å’Œç±»å‹ï¼š

```yaml
directory_mapping:
  follow:
    tag: "follow"
    type: "article"
  clippings:
    tag: "clippings"
    type: "excerpt"
  # ... å…¶ä»–ç›®å½•é…ç½®
```

## ä½¿ç”¨æ–¹æ³•

### 1. é€šè¿‡ä¸»è„šæœ¬ä½¿ç”¨ï¼ˆæ¨èï¼‰

åŸºäºuvçš„ç°ä»£åŒ–è„šæœ¬ï¼Œè‡ªåŠ¨å¤„ç†ç¯å¢ƒæ£€æŸ¥å’Œä¾èµ–ç®¡ç†ï¼š

```bash
# æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
./scripts/preprocessor.sh status

# é¢„è§ˆå¤„ç†manualç›®å½•
./scripts/preprocessor.sh process manual --dry-run

# å¤„ç†æ‰€æœ‰å¯¼å…¥ç›®å½•å¹¶ç§»åŠ¨åˆ°å¾…å¤„ç†
./scripts/preprocessor.sh process all --move-to-inbox

# å¤„ç†ç‰¹å®šç›®å½•
./scripts/preprocessor.sh process follow clippings --move-to-inbox
```

### 2. ç›´æ¥ä½¿ç”¨Pythonè„šæœ¬ï¼ˆé«˜çº§ç”¨æˆ·ï¼‰

```bash
cd scripts/ollama

# ä½¿ç”¨uvè¿è¡ŒPythonè„šæœ¬
uv run --project ../.. python prehandler.py status

# å¤„ç†å•ä¸ªç›®å½•
uv run --project ../.. python prehandler.py process manual --dry-run

# å¤„ç†å¤šä¸ªç›®å½•
uv run --project ../.. python prehandler.py process follow clippings --move-to-inbox
```

### 3. ä½¿ç”¨Claudeå‘½ä»¤ï¼ˆéœ€è¦Claude Codeï¼‰

```bash
# æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼
/para-process

# é¢„è§ˆæ¨¡å¼
/para-process --dry-run

# å¤„ç†ç‰¹å®šç›®å½•
/para-process process manual --move-to-inbox
```

## å¤„ç†æµç¨‹

### 1. æ–‡ä»¶åˆ†æ
```
è¾“å…¥æ–‡ä»¶ â†’ ç¼–ç æ£€æµ‹ â†’ å†…å®¹æå– â†’ å¤§å°æ£€æŸ¥
```

### 2. AIå¤„ç†
```
å†…å®¹æ–‡æœ¬ â†’ Ollama API â†’ ç»“æ„åŒ–è¾“å‡º â†’ å…ƒæ•°æ®ç”Ÿæˆ
```

### 3. æ–‡ä»¶æ›´æ–°
```
åŸå§‹æ–‡ä»¶ â†’ æ·»åŠ frontmatter â†’ æ ‡å‡†åŒ–æ ¼å¼ â†’ å¤‡ä»½åŸæ–‡ä»¶
```

### 4. å¯é€‰ç§»åŠ¨
```
å¤„ç†å®Œæˆ â†’ ç§»åŠ¨åˆ°0-Inbox/pending/ â†’ ç­‰å¾…äººå·¥åˆ†ç±»
```

## è¾“å‡ºæ ¼å¼

å¤„ç†åçš„æ–‡ä»¶ä¼šåŒ…å«æ ‡å‡†åŒ–çš„YAML frontmatterï¼š

```yaml
---
created: 2025-10-16T10:30:00+08:00
updated: 2025-10-16T10:30:00+08:00
status: sprout
type: note
tags: [AI, é¢„å¤„ç†, è‡ªåŠ¨åŒ–]
area: "Personal-Growth"
title: "AIé¢„å¤„ç†å™¨ä½¿ç”¨æŒ‡å—"
description: "ä»‹ç»å¦‚ä½•ä½¿ç”¨TrevanBoxçš„AIé¢„å¤„ç†å™¨"
source: "manual"
---
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **Ollamaè¿æ¥å¤±è´¥**
   ```bash
   # æ£€æŸ¥OllamaæœåŠ¡çŠ¶æ€
   ollama list

   # ç¡®ä¿æœåŠ¡æ­£åœ¨è¿è¡Œ
   ollama serve
   ```

2. **Pythonä¾èµ–ç¼ºå¤±**
   ```bash
   # é‡æ–°å®‰è£…ä¾èµ–ï¼ˆä½¿ç”¨uvï¼‰
   cd ../../
   rm -rf .venv
   uv venv .venv
   uv pip install requests pyyaml chardet

   # æˆ–ä½¿ç”¨è„šæœ¬è‡ªåŠ¨ä¿®å¤
   ./scripts/preprocessor.sh status
   ```

3. **æ–‡ä»¶ç¼–ç é—®é¢˜**
   - ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹æ–‡ä»¶ç¼–ç 
   - å¦‚æœæ£€æµ‹å¤±è´¥ï¼Œä¼šå°è¯•UTF-8å’ŒGBKç¼–ç 

4. **å¤„ç†å¤±è´¥**
   - æ£€æŸ¥`config.yaml`é…ç½®
   - æŸ¥çœ‹é”™è¯¯æ—¥å¿—ä¿¡æ¯
   - ç¡®è®¤æ–‡ä»¶å¤§å°ä¸è¶…è¿‡é™åˆ¶

### è°ƒè¯•æ¨¡å¼

```bash
# å¯ç”¨è¯¦ç»†è¾“å‡º
export DEBUG=1
./scripts/preprocessor.sh process manual --dry-run
```

## æ€§èƒ½ä¼˜åŒ–

### å»ºè®®è®¾ç½®
- **æ¨¡å‹é€‰æ‹©**ï¼šqwen3:8båœ¨é€Ÿåº¦å’Œè´¨é‡é—´å–å¾—å¹³è¡¡
- **æ‰¹é‡å¤„ç†**ï¼šä¸€æ¬¡å¤„ç†å¤šä¸ªæ–‡ä»¶å‡å°‘APIè°ƒç”¨å¼€é”€
- **æ–‡ä»¶å¤§å°é™åˆ¶**ï¼šé¿å…å¤„ç†è¿‡å¤§çš„æ–‡ä»¶å½±å“æ€§èƒ½

### ç¡¬ä»¶è¦æ±‚
- **å†…å­˜**ï¼šå»ºè®®8GBä»¥ä¸Šï¼ˆç”¨äº8Bæ¨¡å‹ï¼‰
- **å­˜å‚¨**ï¼šè‡³å°‘1GBå¯ç”¨ç©ºé—´ï¼ˆç”¨äºæ¨¡å‹å’Œå¤‡ä»½ï¼‰
- **ç½‘ç»œ**ï¼šæœ¬åœ°OllamaæœåŠ¡ï¼Œæ— éœ€å¤–ç½‘è¿æ¥

## æ‰©å±•å¼€å‘

### æ·»åŠ æ–°çš„å¤„ç†è§„åˆ™
1. ä¿®æ”¹`config.yaml`ä¸­çš„`directory_mapping`
2. åœ¨`prehandler.py`ä¸­æ·»åŠ è‡ªå®šä¹‰å¤„ç†é€»è¾‘
3. æ›´æ–°å…ƒæ•°æ®æ ‡å‡†å­—æ®µ

### é›†æˆå…¶ä»–AIæ¨¡å‹
1. ä¿®æ”¹`config.yaml`ä¸­çš„`ollama`é…ç½®
2. è°ƒæ•´APIè°ƒç”¨å‚æ•°
3. é€‚é…æ¨¡å‹è¾“å‡ºæ ¼å¼

## ç‰ˆæœ¬å†å²

- **v1.2.0** (2025-10-16)
  - **uvç°ä»£åŒ–å‡çº§**ï¼šåŸºäºuvçš„Pythonç¯å¢ƒç®¡ç†
  - **æ™ºèƒ½ä¾èµ–å¤„ç†**ï¼šè‡ªåŠ¨æ£€æŸ¥å’Œå®‰è£…ç¼ºå¤±ä¾èµ–
  - **æ€§èƒ½ä¼˜åŒ–**ï¼š10-100å€æ›´å¿«çš„ä¾èµ–å®‰è£…
  - **è·¨å¹³å°å…¼å®¹**ï¼šç»Ÿä¸€çš„ä½¿ç”¨ä½“éªŒ
  - **æ›´å¥½çš„é”™è¯¯å¤„ç†**ï¼šç”¨æˆ·å‹å¥½çš„æç¤ºå’Œè§£å†³æ–¹æ¡ˆ

- **v1.1.0** (2025-10-15)
  - é›†æˆOllama qwen3:8bæ¨¡å‹
  - å®Œæ•´çš„é…ç½®ç³»ç»Ÿ
  - æ”¯æŒåŸºæœ¬çš„AIé¢„å¤„ç†åŠŸèƒ½

- **v1.0.0** (2025-10-15)
  - åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
  - åŸºç¡€AIé¢„å¤„ç†åŠŸèƒ½

## è®¸å¯è¯

MIT License - è¯¦è§é¡¹ç›®æ ¹ç›®å½•çš„LICENSEæ–‡ä»¶

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›é¢„å¤„ç†å™¨ç³»ç»Ÿã€‚

---

## å¿«é€Ÿå¼€å§‹

```bash
# 1. ä¸€é”®ç¯å¢ƒè®¾ç½®
curl -LsSf https://astral.sh/uv/install.sh | sh
uv venv .venv
uv pip install requests pyyaml chardet

# 2. ä¸‹è½½AIæ¨¡å‹
ollama pull qwen3:8b

# 3. æµ‹è¯•ç³»ç»Ÿ
./scripts/preprocessor.sh status

# 4. å¼€å§‹ä½¿ç”¨
./scripts/preprocessor.sh process manual --dry-run
```

**æ³¨æ„**ï¼šé¦–æ¬¡ä½¿ç”¨å‰è¯·ç¡®ä¿ï¼š
1. å·²å®‰è£…uvå·¥å…·å¹¶åˆ›å»ºäº†`.venv`è™šæ‹Ÿç¯å¢ƒ
2. OllamaæœåŠ¡æ­£å¸¸è¿è¡Œä¸”å·²ä¸‹è½½qwen3:8bæ¨¡å‹
3. é¡¹ç›®æ ¹ç›®å½•å­˜åœ¨`CLAUDE.md`æ–‡ä»¶ï¼ˆç”¨äºé¡¹ç›®è¯†åˆ«ï¼‰