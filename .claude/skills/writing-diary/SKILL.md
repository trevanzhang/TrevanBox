---
name: writing-diary
description: Use when users want to create, update, or enhance daily journal entries in TrevanBox system - provides structured approach for locating journal files, applying templates, managing metadata, and guiding content creation
---

# 写日志技能

## 概述

基于TrevanBox系统的PARA个人知识管理方法，提供系统化的日记创建和维护功能。自动化文件管理、模板应用和内容结构化，深度集成PARA工作流。

**重要：此技能必须使用自定义日记模板**
- 模板位置：`.claude/skills/writing-diary/examples/diary.md`
- 禁止使用其他模板文件
- 模板使用是强制性的，不可跳过

## 使用时机

**使用时机：**
- 用户说"写日记"、"完善日记"、"记录想法"、"更新日记"
- 用户想要创建今天的日记条目
- 用户需要帮助结构化日记内容
- 用户想要添加元数据并与现有PARA系统建立连接

**不要使用：**
- 日记上下文之外的一般笔记记录
- 项目特定的文档编写
- 资源收集和组织

## 核心模式

**之前：** 无结构的日记创建，缺乏系统文件管理和元数据
**之后：** 自动化文件定位、模板应用、引导式内容创建和PARA集成

## 快速参考

| 步骤 | 操作 | 工具/命令 |
|------|--------|--------------|
| 1 | 定位/创建今天的日记文件 | `Glob` + `Read`/`Write` |
| 2 | **强制使用自定义模板** | `.claude/skills/writing-diary/examples/diary.md` |
| 3 | **闪念整合检查（必备）** | 检查fleeting目录中的当天闪念 |
| 4 | 引导内容收集 | 交互式提问 |
| 5 | 更新元数据 | Frontmatter管理 |
| 6 | 创建PARA连接 | 链接创建 |
| 7 | 智能内容分析 | 关键词提取和分类 |

## 实现细节

### 1. 文件定位和创建

```bash
# 日记目录结构（基于实际使用）
2-Areas/Personal-Growth/journal/YYYY-MM-DD.md
```

**自动化文件管理：**
- 检查今天的日记是否存在
- 如果缺失则从模板创建
- 读取现有内容进行更新
- 确保正确的文件路径

### 2. 闪念整合（必备检查，条件整合）

**智能闪念处理：**
- **必备检查**：每次创建/更新日记时必须检查fleeting目录
- **当天闪念**：通过文件属性判断是否为当天创建的闪念
- **条件整合**：有闪念则整合到日记，无闪念则跳过整合步骤
- **领域分类**：按工作、健康、财富、学习等领域分组
- **内容整合**：将闪念内容整合到日记的"今日闪念"部分
- **文件清理**：整合完成后自动删除原始闪念文件

**闪念整合工作流：**
1. **必备检查**：检查fleeting目录中是否有当天闪念（通过文件属性判断）
2. **条件执行**：有闪念则执行整合流程，无闪念则跳过后续步骤
3. **内容读取**：读取闪念文件内容和元数据
4. **领域分类**：按area字段分类闪念内容
5. **整合写入**：将闪念内容写入日记的"今日闪念"部分
6. **PARA连接**：基于闪念内容创建相关PARA连接
7. **文件清理**：删除已整合的闪念文件

**闪念文件要求：**
- **位置**：`fleeting/`目录下
- **元数据**：包含`area`字段（工作、健康、财富、学习等）
- **创建时间**：当天创建的闪念文件
- **格式**：标准markdown文件

**闪念整合优势：**
- **信息完整性**：必备检查确保所有当天闪念都能被发现
- **智能处理**：条件整合避免不必要的空段落
- **行动转化**：通过PARA连接将想法转化为行动
- **空间清理**：避免fleeting目录积累过多文件
- **直觉体验**：符合"记录-整合-清理"的自然工作流

### 3. 模板应用

**强制使用自定义模板**：
- **模板路径**：`.claude/skills/writing-diary/examples/diary.md`
- **使用要求**：必须使用此模板，禁止使用其他模板
- **验证步骤**：每次创建日记前检查是否使用正确模板

自定义模板包含：
- 标准frontmatter（日期、心情、精力、标签）
- 结构化部分（今日核心、高光时刻、成长收获、深度思考）
- 中文语言格式
- PARA系统集成
- 创意灵感和人际互动记录

**模板强制使用规则**：
1. 创建新日记时必须从自定义模板开始
2. 更新现有日记时需确保结构符合自定义模板
3. 如果模板不存在，必须创建模板后再继续
4. 禁止使用系统默认模板或其他替代方案

### 4. 内容引导

**交互式提问：**
- "今天有什么特别的事情发生吗？"
- "今天完成了哪些重要事项？"
- "有什么新的想法或感悟？"
- "心情和精力状态如何？"
- "有什么值得记录的时间节点吗？"
- "今天的学习或工作进展如何？"

**内容结构化：**
- 将回答映射到模板部分
- 从内容中提取关键词作为标签
- 识别与Projects/Areas/Resources的连接
- 创建时间线记录

### 5. 元数据管理

**自动更新字段：**
- `updated` 时间戳
- `mood` 和 `energy_level` 从用户输入获取
- `tags` 从内容关键词生成
- `focus_areas` 从提及的主题提取
- `area` 固定为 "Personal-Growth"

**PARA深度集成：**
- 链接到相关项目
- 连接到领域进行维护
- 引用资源进行学习
- 建议将想法转化为行动

### 6. 智能内容分析

**关键词提取：**
- 从用户描述中识别重要概念
- 自动建议相关标签
- 识别潜在的项目机会
- 发现与现有内容的连接点

**内容质量检查：**
- 验证文件路径正确性
- 检查frontmatter完整性
- 验证内容结构
- 确认PARA连接

## 示例

### 示例1：新日记创建

**用户：** "我想写今天的日记"

**技能应用：**
1. 定位/创建：`2-Areas/Personal-Growth/journal/2025-10-18.md`
2. **强制模板检查**：验证使用 `.claude/skills/writing-diary/examples/diary.md`
3. 应用模板：使用自定义模板结构
4. 引导内容："请告诉我今天发生了什么特别的事情？"
5. 更新元数据：从回答中提取心情、精力、标签
6. 创建连接：链接到相关Projects/Areas
7. 智能分析：识别关键词并建议相关连接

**结果：** 完整的日记条目，基于自定义模板，包含结构化内容和PARA集成

### 示例2：日记更新

**用户：** "完善今天的日记"

**技能应用：**
1. 定位现有：读取 `2025-10-18.md`
2. 识别空白：检查空的部分
3. 引导完成："我看到今日重点部分还是空的，有什么计划要添加吗？"
4. 更新元数据：刷新 `updated` 时间戳
5. 增强连接：基于内容添加新链接
6. 时间线记录：记录重要时间节点

**结果：** 增强的日记条目，包含完整部分

### 示例3：内容结构化

**用户：** "今天测试了Obsidian，感觉功能更强了"

**技能应用：**
1. 提取关键词："Obsidian"、"功能增强"
2. 结构化内容：添加到"今日思考"部分
3. 更新标签：添加 `[Obsidian, 工具学习]`
4. 创建连接：链接到相关Resources
5. 建议行动："这个发现可以转化为学习项目吗？"
6. 时间记录：记录测试的具体时间

**结果：** 结构化内容，包含可发现的元数据

### 示例4：闪念整合

**场景：** 用户有多个当天闪念文件需要整合到日记

**技能应用：**
1. **闪念检查**：自动检查fleeting目录中的当天闪念文件
2. **领域分类**：按工作、健康、财富、学习等领域分组闪念
3. **内容整合**：将闪念内容写入日记的"今日闪念"部分
4. **PARA连接**：基于闪念内容创建相关项目、领域、资源连接
5. **文件清理**：整合完成后自动删除原始闪念文件

**闪念整合结果：**
- **工作领域**：项目想法 → 转化为新项目
- **健康领域**：健康提醒 → 更新健康管理领域
- **财富领域**：投资想法 → 调整财富管理规划
- **学习领域**：技术笔记 → 添加到学习资源

**结果：** 完整的日记条目，包含整合的闪念内容和自动创建的PARA连接，同时清理了fleeting目录

## 常见错误

**❌ 手动文件创建：** 创建不一致的路径和格式
**✅ 使用自动化定位：** 确保标准结构

**❌ 使用错误模板：** 使用系统默认模板或其他模板
**✅ 强制使用自定义模板：** 必须使用 `.claude/skills/writing-diary/examples/diary.md`

**❌ 跳过模板检查：** 未验证是否使用正确模板
**✅ 每次验证模板：** 确保使用指定的自定义模板

**❌ 无结构内容：** 难以回顾和连接
**✅ 遵循模板：** 提供一致的组织

**❌ 缺少元数据：** 限制搜索和分析
**✅ 自动填充字段：** 启用系统集成

**❌ 忽略PARA连接：** 将日记与系统隔离
**✅ 创建相关链接：** 与知识网络集成

**❌ 缺少时间记录：** 难以追踪事件顺序
**✅ 记录时间线：** 提供事件的时间上下文

**❌ 忽略闪念检查：** 可能遗漏重要的闪念信息
**✅ 必备闪念检查：** 每次日记操作都检查fleeting目录

**❌ 强制闪念整合：** 即使无闪念也添加空段落
**✅ 条件闪念整合：** 有闪念则整合，无闪念则跳过

**❌ 手动闪念管理：** 需要手动复制粘贴闪念内容
**✅ 智能闪念整合：** 自动读取、分类、整合闪念内容

## 实际影响

- **时间节省：** 日记创建速度提升5倍
- **一致性：** 所有条目采用标准化格式
- **可发现性：** 丰富的元数据支持强大查询
- **集成性：** 与PARA工作流无缝连接
- **反思质量：** 结构化提示鼓励深度思考
- **行动转化：** 将想法转化为具体项目

---

**技能版本：** 1.3
**最后更新：** 2025-10-19
**兼容系统：** TrevanBox v1.2.1

## 更新说明

### v1.3 (2025-10-19)
- **闪念整合功能**：必备检查、条件整合、自动清理fleeting目录中的当天闪念
- **智能逻辑判断**：每次必检查，有闪念则整合，无闪念则跳过
- **领域分类整合**：按工作、健康、财富、学习等领域分组闪念内容
- **PARA连接创建**：基于闪念内容自动创建相关项目、领域、资源连接
- **文件自动清理**：整合完成后自动删除原始闪念文件

### v1.2 (2025-10-19)
- **强制自定义模板**：必须使用 `.claude/skills/writing-diary/examples/diary.md`
- **模板验证机制**：每次操作前检查模板使用
- **自定义模板创建**：添加专门的日记模板文件
- **模板使用规则**：明确禁止使用其他模板

### v1.1 (2025-10-18)
- **修正文件路径**：更新为实际使用的日记目录结构
- **增强内容引导**：添加更多交互式提问选项
- **改进PARA集成**：加强项目、领域、资源的连接
- **添加时间线记录**：支持事件时间节点记录
- **智能内容分析**：关键词提取和分类建议
- **中文优化**：完全中文化的技能文档

### v1.0 (2025-10-18)
- 初始版本发布
- 基础日记创建和更新功能
- 标准模板应用
- 基础PARA集成